!function(t){var r={};function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)n.d(e,o,function(r){return t[r]}.bind(null,o));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="https://rob-blackbourn.github.io/demo-react-pyodide3/",n(n.s=2)}([function(t,r,n){t.exports=n(1)},function(t,r,n){var e=function(t){"use strict";var r,n=Object.prototype,e=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,r,n){return Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(C){c=function(t,r,n){return t[r]=n}}function f(t,r,n,e){var o=r&&r.prototype instanceof m?r:m,a=Object.create(o.prototype),i=new O(e||[]);return a._invoke=function(t,r,n){var e=l;return function(o,a){if(e===h)throw new Error("Generator is already running");if(e===y){if("throw"===o)throw a;return k()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var u=S(i,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(e===l)throw e=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);e=h;var c=s(t,r,n);if("normal"===c.type){if(e=n.done?y:p,c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(e=y,n.method="throw",n.arg=c.arg)}}}(t,n,i),a}function s(t,r,n){try{return{type:"normal",arg:t.call(r,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=f;var l="suspendedStart",p="suspendedYield",h="executing",y="completed",d={};function m(){}function v(){}function g(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(P([])));x&&x!==n&&e.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function _(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function A(t,r){function n(o,a,i,u){var c=s(t[o],t,a);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"===typeof l&&e.call(l,"__await")?r.resolve(l.__await).then((function(t){n("next",t,i,u)}),(function(t){n("throw",t,i,u)})):r.resolve(l).then((function(t){f.value=t,i(f)}),(function(t){return n("throw",t,i,u)}))}u(c.arg)}var o;this._invoke=function(t,e){function a(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(a,a):a()}}function S(t,n){var e=t.iterator[n.method];if(e===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=r,S(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=s(e,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=r),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function L(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function j(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(e.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=r,n.done=!0,n};return i.next=i}}return{next:k}}function k(){return{value:r,done:!0}}return v.prototype=E.constructor=g,g.constructor=v,v.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"===typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},_(A.prototype),A.prototype[i]=function(){return this},t.AsyncIterator=A,t.async=function(r,n,e,o,a){void 0===a&&(a=Promise);var i=new A(f(r,n,e,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(E),c(E,u,"Generator"),E[a]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var n in t)r.push(n);return r.reverse(),function n(){for(;r.length;){var e=r.pop();if(e in t)return n.value=e,n.done=!1,n}return n.done=!0,n}},t.values=P,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(e,o){return u.type="throw",u.arg=t,n.next=e,o&&(n.method="next",n.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),f=e.call(i,"finallyLoc");if(c&&f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=r,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var e=n.completion;if("throw"===e.type){var o=e.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:P(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=r),d}},t}(t.exports);try{regeneratorRuntime=e}catch(o){Function("r","regeneratorRuntime = r")(e)}},function(t,r,n){"use strict";n.r(r);var e=n(0),o=n.n(e);function a(t,r,n,e,o,a,i){try{var u=t[a](i),c=u.value}catch(f){return void n(f)}u.done?r(c):Promise.resolve(c).then(e,o)}function i(t){return function(){var r=this,n=arguments;return new Promise((function(e,o){var i=t.apply(r,n);function u(t){a(i,e,o,u,c,"next",t)}function c(t){a(i,e,o,u,c,"throw",t)}u(void 0)}))}}function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function c(t,r){if(t){if("string"===typeof t)return u(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,r):void 0}}function f(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}}(t,r)||c(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function l(t,r){return(l=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t,r,n){return(h=p()?Reflect.construct:function(t,r,n){var e=[null];e.push.apply(e,r);var o=new(Function.bind.apply(t,e));return n&&l(o,n.prototype),o}).apply(null,arguments)}function y(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=Symbol("Comlink.proxy"),m=Symbol("Comlink.endpoint"),v=Symbol("Comlink.releaseProxy"),g=Symbol("Comlink.thrown"),b=function(t){return"object"===typeof t&&null!==t||"function"===typeof t},w=new Map([["proxy",{canHandle:function(t){return b(t)&&t[d]},serialize:function(t){var r=new MessageChannel,n=r.port1,e=r.port2;return x(t,n),[e,[e]]},deserialize:function(t){return t.start(),A(t,[],r);var r}}],["throw",{canHandle:function(t){return b(t)&&g in t},serialize:function(t){var r=t.value;return[r instanceof Error?{isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:{isError:!1,value:r},[]]},deserialize:function(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function x(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;r.addEventListener("message",(function n(e){if(e&&e.data){var o,a=Object.assign({path:[]},e.data),i=a.id,u=a.type,c=a.path,l=(e.data.argumentList||[]).map(k);try{var p=c.slice(0,-1).reduce((function(t,r){return t[r]}),t),d=c.reduce((function(t,r){return t[r]}),t);switch(u){case"GET":o=d;break;case"SET":p[c.slice(-1)[0]]=k(e.data.value),o=!0;break;case"APPLY":o=d.apply(p,l);break;case"CONSTRUCT":var m;o=O(h(d,y(l)));break;case"ENDPOINT":var v=new MessageChannel,b=v.port1,w=v.port2;x(t,w),o=j(b,[b]);break;case"RELEASE":o=void 0;break;default:return}}catch(m){o=s({value:m},g,0)}Promise.resolve(o).catch((function(t){return s({value:t},g,0)})).then((function(t){var e=f(P(t),2),o=e[0],a=e[1];r.postMessage(Object.assign(Object.assign({},o),{id:i}),a),"RELEASE"===u&&(r.removeEventListener("message",n),E(r))}))}})),r.start&&r.start()}function E(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function _(t){if(t)throw new Error("Proxy has been released and is not useable")}function A(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},e=!1,o=new Proxy(n,{get:function(n,a){if(_(e),a===v)return function(){return C(t,{type:"RELEASE",path:r.map((function(t){return t.toString()}))}).then((function(){E(t),e=!0}))};if("then"===a){if(0===r.length)return{then:function(){return o}};var i=C(t,{type:"GET",path:r.map((function(t){return t.toString()}))}).then(k);return i.then.bind(i)}return A(t,[].concat(y(r),[a]))},set:function(n,o,a){_(e);var i=f(P(a),2),u=i[0],c=i[1];return C(t,{type:"SET",path:[].concat(y(r),[o]).map((function(t){return t.toString()})),value:u},c).then(k)},apply:function(n,o,a){_(e);var i=r[r.length-1];if(i===m)return C(t,{type:"ENDPOINT"}).then(k);if("bind"===i)return A(t,r.slice(0,-1));var u=f(S(a),2),c=u[0],s=u[1];return C(t,{type:"APPLY",path:r.map((function(t){return t.toString()})),argumentList:c},s).then(k)},construct:function(n,o){_(e);var a=f(S(o),2),i=a[0],u=a[1];return C(t,{type:"CONSTRUCT",path:r.map((function(t){return t.toString()})),argumentList:i},u).then(k)}});return o}function S(t){var r,n=t.map(P);return[n.map((function(t){return t[0]})),(r=n.map((function(t){return t[1]})),Array.prototype.concat.apply([],r))]}var L=new WeakMap;function j(t,r){return L.set(t,r),t}function O(t){return Object.assign(t,s({},d,!0))}function P(t){var r,n=function(t,r){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=c(t))||r&&t&&"number"===typeof t.length){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(w);try{for(n.s();!(r=n.n()).done;){var e=f(r.value,2),o=e[0],a=e[1];if(a.canHandle(t)){var i=f(a.serialize(t),2);return[{type:"HANDLER",name:o,value:i[0]},i[1]]}}}catch(u){n.e(u)}finally{n.f()}return[{type:"RAW",value:t},L.get(t)||[]]}function k(t){switch(t.type){case"HANDLER":return w.get(t.name).deserialize(t.value);case"RAW":return t.value}}function C(t,r,n){return new Promise((function(e){var o=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");t.addEventListener("message",(function r(n){n.data&&n.data.id&&n.data.id===o&&(t.removeEventListener("message",r),e(n.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:o},r),n)}))}function T(){return(T=i(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,self.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.17.0/full/"});case 2:return t.next=4,self.pyodide.loadPackage(["numpy"]);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}self.importScripts("https://cdn.jsdelivr.net/pyodide/v0.17.0/full/pyodide.js");var M=function(){return T.apply(this,arguments)}();function N(){var t=self.pyodide.globals.get("generate_matmul_exercise");return function(r,n){console.log("generateMatmulExercise");var e=t(r,n),o={m:e.get("m"),n:e.get("n"),p:e.get("p"),A:e.get("A").toJs().map((function(t){return Array.from(t)})),B:e.get("B").toJs().map((function(t){return Array.from(t)})),C:e.get("C").toJs().map((function(t){return Array.from(t)}))};return e.destroy(),o}}function R(){var t=self.pyodide.globals.get("generate_matadd_exercise");return function(r,n){var e=t(r,n),o={m:e.get("m"),n:e.get("n"),A:e.get("A").toJs().map((function(t){return Array.from(t)})),B:e.get("B").toJs().map((function(t){return Array.from(t)})),C:e.get("C").toJs().map((function(t){return Array.from(t)}))};return e.destroy(),o}}x({setup:function(){var t=this;return i(o.a.mark((function r(){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,M;case 2:self.pyodide.runPython("\nimport random\nimport numpy as np\n\ndef generate_matmul_exercise(max_rows, max_cols):\n    m = random.randint(1, max_rows)\n    n = random.randint(1, max_cols)\n    p = random.randint(1, max_cols)\n\n    rng = np.random.default_rng()\n    A = rng.integers(low=-10, high=10, size=(m, n), dtype=np.int32)\n    B = rng.integers(low=-10, high=10, size=(n, p), dtype=np.int32)\n    C = A @ B\n\n    return {\n        'm': m,\n        'n': n,\n        'p': p,\n        'A': A,\n        'B': B,\n        'C': C\n    }\n\ndef generate_matadd_exercise(max_rows, max_cols):\n    m = random.randint(1, max_rows)\n    n = random.randint(1, max_cols)\n\n    rng = np.random.default_rng()\n    A = rng.integers(low=-10, high=10, size=(m, n), dtype=np.int32)\n    B = rng.integers(low=-10, high=10, size=(m, n), dtype=np.int32)\n    C = A + B\n\n    return {\n        'm': m,\n        'n': n,\n        'A': A,\n        'B': B,\n        'C': C\n    }    \n"),t.generateMatmulExercise=N(),t.generateMataddExercise=R();case 5:case"end":return r.stop()}}),r)})))()}})}]);
//# sourceMappingURL=pythonWorker.d41e1e28.worker.js.map