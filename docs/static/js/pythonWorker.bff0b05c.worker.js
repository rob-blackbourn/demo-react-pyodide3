!function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"===typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(r,o,function(t){return n[t]}.bind(null,o));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="https://rob-blackbourn.github.io/demo-react-pyodide3/",e(e.s=0)}([function(n,t,e){"use strict";function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function o(n,t){if(n){if("string"===typeof n)return r(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(n,t):void 0}}function a(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n)){var e=[],r=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(r=(i=u.next()).done)&&(e.push(i.value),!t||e.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return e}}(n,t)||o(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function u(n,t){return(u=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function f(n,t,e){return(f=c()?Reflect.construct:function(n,t,e){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(n,r));return e&&u(o,e.prototype),o}).apply(null,arguments)}function s(n){return function(n){if(Array.isArray(n))return r(n)}(n)||function(n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||o(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.r(t);var l=Symbol("Comlink.proxy"),p=Symbol("Comlink.endpoint"),m=Symbol("Comlink.releaseProxy"),d=Symbol("Comlink.thrown"),y=function(n){return"object"===typeof n&&null!==n||"function"===typeof n},g=new Map([["proxy",{canHandle:function(n){return y(n)&&n[l]},serialize:function(n){var t=new MessageChannel,e=t.port1,r=t.port2;return v(n,e),[r,[r]]},deserialize:function(n){return n.start(),A(n,[],t);var t}}],["throw",{canHandle:function(n){return y(n)&&d in n},serialize:function(n){var t=n.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(n){if(n.isError)throw Object.assign(new Error(n.value.message),n.value);throw n.value}}]]);function v(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;t.addEventListener("message",(function e(r){if(r&&r.data){var o,u=Object.assign({path:[]},r.data),c=u.id,l=u.type,p=u.path,m=(r.data.argumentList||[]).map(j);try{var y=p.slice(0,-1).reduce((function(n,t){return n[t]}),n),g=p.reduce((function(n,t){return n[t]}),n);switch(l){case"GET":o=g;break;case"SET":y[p.slice(-1)[0]]=j(r.data.value),o=!0;break;case"APPLY":o=g.apply(y,m);break;case"CONSTRUCT":var b;o=_(f(g,s(m)));break;case"ENDPOINT":var A=new MessageChannel,S=A.port1,w=A.port2;v(n,w),o=E(S,[S]);break;case"RELEASE":o=void 0;break;default:return}}catch(b){o=i({value:b},d,0)}Promise.resolve(o).catch((function(n){return i({value:n},d,0)})).then((function(n){var r=a(x(n),2),o=r[0],i=r[1];t.postMessage(Object.assign(Object.assign({},o),{id:c}),i),"RELEASE"===l&&(t.removeEventListener("message",e),h(t))}))}})),t.start&&t.start()}function h(n){(function(n){return"MessagePort"===n.constructor.name})(n)&&n.close()}function b(n){if(n)throw new Error("Proxy has been released and is not useable")}function A(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,o=new Proxy(e,{get:function(e,a){if(b(r),a===m)return function(){return O(n,{type:"RELEASE",path:t.map((function(n){return n.toString()}))}).then((function(){h(n),r=!0}))};if("then"===a){if(0===t.length)return{then:function(){return o}};var i=O(n,{type:"GET",path:t.map((function(n){return n.toString()}))}).then(j);return i.then.bind(i)}return A(n,[].concat(s(t),[a]))},set:function(e,o,i){b(r);var u=a(x(i),2),c=u[0],f=u[1];return O(n,{type:"SET",path:[].concat(s(t),[o]).map((function(n){return n.toString()})),value:c},f).then(j)},apply:function(e,o,i){b(r);var u=t[t.length-1];if(u===p)return O(n,{type:"ENDPOINT"}).then(j);if("bind"===u)return A(n,t.slice(0,-1));var c=a(S(i),2),f=c[0],s=c[1];return O(n,{type:"APPLY",path:t.map((function(n){return n.toString()})),argumentList:f},s).then(j)},construct:function(e,o){b(r);var i=a(S(o),2),u=i[0],c=i[1];return O(n,{type:"CONSTRUCT",path:t.map((function(n){return n.toString()})),argumentList:u},c).then(j)}});return o}function S(n){var t,e=n.map(x);return[e.map((function(n){return n[0]})),(t=e.map((function(n){return n[1]})),Array.prototype.concat.apply([],t))]}var w=new WeakMap;function E(n,t){return w.set(n,t),n}function _(n){return Object.assign(n,i({},l,!0))}function x(n){var t,e=function(n,t){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=o(n))||t&&n&&"number"===typeof n.length){e&&(n=e);var r=0,a=function(){};return{s:a,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return u=n.done,n},e:function(n){c=!0,i=n},f:function(){try{u||null==e.return||e.return()}finally{if(c)throw i}}}}(g);try{for(e.s();!(t=e.n()).done;){var r=a(t.value,2),i=r[0],u=r[1];if(u.canHandle(n)){var c=a(u.serialize(n),2);return[{type:"HANDLER",name:i,value:c[0]},c[1]]}}}catch(f){e.e(f)}finally{e.f()}return[{type:"RAW",value:n},w.get(n)||[]]}function j(n){switch(n.type){case"HANDLER":return g.get(n.name).deserialize(n.value);case"RAW":return n.value}}function O(n,t,e){return new Promise((function(r){var o=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");n.addEventListener("message",(function t(e){e.data&&e.data.id&&e.data.id===o&&(n.removeEventListener("message",t),r(e.data))})),n.start&&n.start(),n.postMessage(Object.assign({id:o},t),e)}))}self.importScripts("https://cdn.jsdelivr.net/pyodide/v0.17.0/full/pyodide.js");v({setup:function(){var n=this;self.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.17.0/full/"}).then((function(t){t.loadPackage(["numpy"]).then((function(){t.runPython("\nimport random\nimport numpy as np\n\ndef generate_matmul_exercise(max_rows, max_cols):\n    m = random.randint(1, max_rows)\n    n = random.randint(1, max_cols)\n    p = random.randint(1, max_cols)\n\n    rng = np.random.default_rng()\n    A = rng.integers(low=-10, high=10, size=(m, n), dtype=np.int32)\n    B = rng.integers(low=-10, high=10, size=(n, p), dtype=np.int32)\n    C = A @ B\n\n    return {\n        'm': m,\n        'n': n,\n        'p': p,\n        'A': A,\n        'B': B,\n        'C': C\n    }\n\ndef generate_matadd_exercise(max_rows, max_cols):\n    m = random.randint(1, max_rows)\n    n = random.randint(1, max_cols)\n\n    rng = np.random.default_rng()\n    A = rng.integers(low=-10, high=10, size=(m, n), dtype=np.int32)\n    B = rng.integers(low=-10, high=10, size=(m, n), dtype=np.int32)\n    C = A + B\n\n    return {\n        'm': m,\n        'n': n,\n        'A': A,\n        'B': B,\n        'C': C\n    }    \n"),n.generateMatmulExercise=function(n){var t=n.globals.get("generate_matmul_exercise");return function(n,e){console.log("generateMatmulExercise");var r=t(n,e),o={m:r.get("m"),n:r.get("n"),p:r.get("p"),A:r.get("A").toJs().map((function(n){return Array.from(n)})),B:r.get("B").toJs().map((function(n){return Array.from(n)})),C:r.get("C").toJs().map((function(n){return Array.from(n)}))};return r.destroy(),o}}(t),n.generateMataddExercise=function(n){var t=n.globals.get("generate_matadd_exercise");return function(n,e){var r=t(n,e),o={m:r.get("m"),n:r.get("n"),A:r.get("A").toJs().map((function(n){return Array.from(n)})),B:r.get("B").toJs().map((function(n){return Array.from(n)})),C:r.get("C").toJs().map((function(n){return Array.from(n)}))};return r.destroy(),o}}(t)})).catch((function(n){console.log(n)}))}))}})}]);
//# sourceMappingURL=pythonWorker.bff0b05c.worker.js.map